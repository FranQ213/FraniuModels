<!--
  Plik: index.html
  Instrukcja krótkie:
  1) Zamień 'logo.png' na swoje logo (wrzuć plik do repo i zostaw nazwę lub zmień src).
  2) Podmień wartości data-paylink w przyciskach "Kup" na linki płatności wygenerowane w Przelewy24/PayU/Stripe itp.
  3) Wypchnij repo na GitHub i włącz GitHub Pages (np. branch 'main' lub repo: username.github.io).

  Jeśli chcesz, mogę przygotować wersję z prostym koszykiem, integracją Stripe (serverless) albo z generowaniem PDF faktury.
-->

<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sklep - statyczna strona (GitHub Pages)</title>
  <style>
    :root{--accent:#0b74de;--bg:#f7f8fb;--card:#ffffff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}

    /* Nagłówek */
    header{display:flex;align-items:center;gap:16px;padding:14px 18px;background:linear-gradient(180deg,#fff, #fbfdff);border-bottom:1px solid #e6eef9;position:sticky;top:0;z-index:20}
    .logo-wrap{display:flex;align-items:center;gap:10px}
    .logo{width:56px;height:40px;display:flex;align-items:center;justify-content:center;background:#eef6ff;border-radius:6px;overflow:hidden}
    .logo img{max-width:100%;max-height:100%;display:block}
    .site-title{font-weight:700;font-size:16px}
    .spacer{flex:1}
    .cart{font-size:14px;color:var(--muted)}

    /* Główna zawartość */
    .container{max-width:1100px;margin:28px auto;padding:0 18px}
    .hero{display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:18px}
    .hero h1{margin:0;font-size:22px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}

    /* Karta produktu */
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(17,24,39,0.04);display:flex;flex-direction:column;gap:10px}
    .thumb{height:150px;border-radius:8px;background:#f1f5f9;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .name{font-weight:600}
    .price{font-weight:700}
    .desc{color:var(--muted);font-size:13px}

    .actions{display:flex;gap:8px;align-items:center}
    .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid #e6eef9;color:var(--muted)}

    footer{margin:30px 0;color:var(--muted);text-align:center;font-size:13px}

    @media (max-width:600px){
      .hero{flex-direction:column;align-items:flex-start}
      .logo{width:48px;height:36px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-wrap">
      <!-- miejsce na logo w lewym górnym rogu -->
      <a href="/" style="display:flex;align-items:center;text-decoration:none;color:inherit;">
        <div class="logo" title="Twoje logo (zamień plik logo.png)">
          <!-- zamień 'logo.png' na swoje logo -->
          <img id="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
          <!-- jeśli brak pliku logo.png, pokazujemy inicjały -->
          <div id="logo-initials" style="display:none;font-weight:700;color:var(--accent)">MOJE</div>
        </div>
      </a>
      <div>
        <div class="site-title">Mój sklep</div>
        <div style="font-size:12px;color:var(--muted)">Prosty sklep na GitHub Pages</div>
      </div>
    </div>

    <div class="spacer"></div>
    <div class="cart">Koszyk: <span id="cart-count">0</span></div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>Produkty</h1>
        <p style="margin:6px 0;color:var(--muted)">Kliknij "Kup" aby przejść do płatności (linki do PSP).</p>
      </div>
      <div>
        <!-- Tu możesz dodać pasek wyszukiwania lub filtrowanie w przyszłości -->
      </div>
    </section>

    <section class="products" id="products">

      <!-- PRZYKŁADOWA KARTA PRODUKTU - skopiuj/zmodyfikuj wg potrzeb -->
      <article class="card">
        <div class="thumb"><img src="https://images.unsplash.com/photo-1606813902820-4b3c6fb7f3e6?q=80&w=800&auto=format&fit=crop" alt="Produkt 1"></div>
        <div class="meta"><div class="name">Produkt 1</div><div class="price">10,00 PLN</div></div>
        <div class="desc">Krótki opis produktu. Wstaw właściwy opis.</div>
        <div class="actions">
          <!-- data-paylink -> zamień na link do płatności z Przelewy24/PayU/Stripe -->
          <button class="btn btn-primary" data-paylink="https://example.com/pay/product1">Kup</button>
          <button class="btn btn-ghost" onclick="copyLink(this)">Kopiuj link</button>
        </div>
      </article>

      <article class="card">
        <div class="thumb"><img src="https://images.unsplash.com/photo-1513708929623-0e9f39f2d1f3?q=80&w=800&auto=format&fit=crop" alt="Produkt 2"></div>
        <div class="meta"><div class="name">Produkt 2</div><div class="price">25,00 PLN</div></div>
        <div class="desc">Inny fajny produkt — zamień obraz i cenę.</div>
        <div class="actions">
          <button class="btn btn-primary" data-paylink="https://example.com/pay/product2">Kup</button>
          <button class="btn btn-ghost" onclick="copyLink(this)">Kopiuj link</button>
        </div>
      </article>

      <!-- Dodaj kolejne karty w ten sposób -->

    </section>

    <footer>
      © "Twój sklep" — statyczna strona. Zastąp treści i linki na swoje.
    </footer>
  </main>

  <script>
    // Pokazanie inicjałów logo jeśli nie ma pliku logo.png
    window.addEventListener('load', () => {
      const logoImg = document.getElementById('logo-img');
      const logoInit = document.getElementById('logo-initials');
      if (logoImg && logoImg.style.display === 'none') {
        logoInit.style.display = 'block';
      }

      // Obsługa przycisków Kup
      document.querySelectorAll('button[data-paylink]').forEach(btn => {
        btn.addEventListener('click', () => {
          const url = btn.getAttribute('data-paylink');
          if (!url) return alert('Brak ustawionego linku do płatności. Zmień data-paylink w kodzie.');
          // domyślnie otwieramy w nowej karcie — możesz zmienić na location.href aby przekierować w tej samej karcie
          window.open(url, '_blank', 'noopener');
        });
      });

      // Prosty licznik koszyka (lokalny) — dodaje 1 przy kliknięciu Kup
      let count = Number(localStorage.getItem('cartCount') || 0);
      document.getElementById('cart-count').textContent = count;
      document.querySelectorAll('.btn-primary').forEach(b => {
        b.addEventListener('click', () => {
          count += 1;
          localStorage.setItem('cartCount', count);
          document.getElementById('cart-count').textContent = count;
        });
      });
    });

    function copyLink(el) {
      const card = el.closest('.card');
      const btn = card.querySelector('button[data-paylink]');
      const url = btn.getAttribute('data-paylink');
      navigator.clipboard && navigator.clipboard.writeText(url).then(()=>{
        alert('Skopiowano link do płatności: ' + url);
      }).catch(()=>{
        prompt('Skopiuj ręcznie link do płatności:', url);
      });
    }
  </script>
</body>
</html>
<!--
  Plik: index.html
  Instrukcja krótkie:
  1) Zamień 'logo.png' na swoje logo (wrzuć plik do repo i zostaw nazwę lub zmień src).
  2) Podmień wartości data-paylink w przyciskach "Kup" na linki płatności wygenerowane w Przelewy24/PayU/Stripe itp.
  3) Wypchnij repo na GitHub i włącz GitHub Pages (np. branch 'main' lub repo: username.github.io).

  Jeśli chcesz, mogę przygotować wersję z prostym koszykiem, integracją Stripe (serverless) albo z generowaniem PDF faktury.
-->

<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sklep - statyczna strona (GitHub Pages)</title>
  <style>
    :root{--accent:#0b74de;--bg:#f7f8fb;--card:#ffffff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}

    /* Nagłówek */
    header{display:flex;align-items:center;gap:16px;padding:14px 18px;background:linear-gradient(180deg,#fff, #fbfdff);border-bottom:1px solid #e6eef9;position:sticky;top:0;z-index:20}
    .logo-wrap{display:flex;align-items:center;gap:10px}
    .logo{width:56px;height:40px;display:flex;align-items:center;justify-content:center;background:#eef6ff;border-radius:6px;overflow:hidden}
    .logo img{max-width:100%;max-height:100%;display:block}
    .site-title{font-weight:700;font-size:16px}
    .spacer{flex:1}
    .cart{font-size:14px;color:var(--muted)}

    /* Główna zawartość */
    .container{max-width:1100px;margin:28px auto;padding:0 18px}
    .hero{display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:18px}
    .hero h1{margin:0;font-size:22px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}

    /* Karta produktu */
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(17,24,39,0.04);display:flex;flex-direction:column;gap:10px}
    .thumb{height:150px;border-radius:8px;background:#f1f5f9;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .name{font-weight:600}
    .price{font-weight:700}
    .desc{color:var(--muted);font-size:13px}

    .actions{display:flex;gap:8px;align-items:center}
    .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid #e6eef9;color:var(--muted)}

    footer{margin:30px 0;color:var(--muted);text-align:center;font-size:13px}

    @media (max-width:600px){
      .hero{flex-direction:column;align-items:flex-start}
      .logo{width:48px;height:36px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-wrap">
      <!-- miejsce na logo w lewym górnym rogu -->
      <a href="/" style="display:flex;align-items:center;text-decoration:none;color:inherit;">
        <div class="logo" title="Twoje logo (zamień plik logo.png)">
          <!-- zamień 'logo.png' na swoje logo -->
          <img id="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
          <!-- jeśli brak pliku logo.png, pokazujemy inicjały -->
          <div id="logo-initials" style="display:none;font-weight:700;color:var(--accent)">MOJE</div>
        </div>
      </a>
      <div>
        <div class="site-title">Mój sklep</div>
        <div style="font-size:12px;color:var(--muted)">Prosty sklep na GitHub Pages</div>
      </div>
    </div>

    <div class="spacer"></div>
    <div class="cart">Koszyk: <span id="cart-count">0</span></div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>Produkty</h1>
        <p style="margin:6px 0;color:var(--muted)">Kliknij "Kup" aby przejść do płatności (linki do PSP).</p>
      </div>
      <div>
        <!-- Tu możesz dodać pasek wyszukiwania lub filtrowanie w przyszłości -->
      </div>
    </section>

    <section class="products" id="products">

      <!-- PRZYKŁADOWA KARTA PRODUKTU - skopiuj/zmodyfikuj wg potrzeb -->
      <article class="card">
        <div class="thumb"><img src="https://images.unsplash.com/photo-1606813902820-4b3c6fb7f3e6?q=80&w=800&auto=format&fit=crop" alt="Produkt 1"></div>
        <div class="meta"><div class="name">Produkt 1</div><div class="price">10,00 PLN</div></div>
        <div class="desc">Krótki opis produktu. Wstaw właściwy opis.</div>
        <div class="actions">
          <!-- data-paylink -> zamień na link do płatności z Przelewy24/PayU/Stripe -->
          <button class="btn btn-primary" data-paylink="https://example.com/pay/product1">Kup</button>
          <button class="btn btn-ghost" onclick="copyLink(this)">Kopiuj link</button>
        </div>
      </article>

      <article class="card">
        <div class="thumb"><img src="https://images.unsplash.com/photo-1513708929623-0e9f39f2d1f3?q=80&w=800&auto=format&fit=crop" alt="Produkt 2"></div>
        <div class="meta"><div class="name">Produkt 2</div><div class="price">25,00 PLN</div></div>
        <div class="desc">Inny fajny produkt — zamień obraz i cenę.</div>
        <div class="actions">
          <button class="btn btn-primary" data-paylink="https://example.com/pay/product2">Kup</button>
          <button class="btn btn-ghost" onclick="copyLink(this)">Kopiuj link</button>
        </div>
      </article>

      <!-- Dodaj kolejne karty w ten sposób -->

    </section>

    <footer>
      © "Twój sklep" — statyczna strona. Zastąp treści i linki na swoje.
    </footer>
  </main>

  <script>
    // Pokazanie inicjałów logo jeśli nie ma pliku logo.png
    window.addEventListener('load', () => {
      const logoImg = document.getElementById('logo-img');
      const logoInit = document.getElementById('logo-initials');
      if (logoImg && logoImg.style.display === 'none') {
        logoInit.style.display = 'block';
      }

      // Obsługa przycisków Kup
      document.querySelectorAll('button[data-paylink]').forEach(btn => {
        btn.addEventListener('click', () => {
          const url = btn.getAttribute('data-paylink');
          if (!url) return alert('Brak ustawionego linku do płatności. Zmień data-paylink w kodzie.');
          // domyślnie otwieramy w nowej karcie — możesz zmienić na location.href aby przekierować w tej samej karcie
          window.open(url, '_blank', 'noopener');
        });
      });

      // Prosty licznik koszyka (lokalny) — dodaje 1 przy kliknięciu Kup
      let count = Number(localStorage.getItem('cartCount') || 0);
      document.getElementById('cart-count').textContent = count;
      document.querySelectorAll('.btn-primary').forEach(b => {
        b.addEventListener('click', () => {
          count += 1;
          localStorage.setItem('cartCount', count);
          document.getElementById('cart-count').textContent = count;
        });
      });
    });

    function copyLink(el) {
      const card = el.closest('.card');
      const btn = card.querySelector('button[data-paylink]');
      const url = btn.getAttribute('data-paylink');
      navigator.clipboard && navigator.clipboard.writeText(url).then(()=>{
        alert('Skopiowano link do płatności: ' + url);
      }).catch(()=>{
        prompt('Skopiuj ręcznie link do płatności:', url);
      });
    }
  </script>
</body>
</html>
<!--
  Plik: index.html
  Zmiany: "Kup" -> "Dodaj do Koszyka"; dodany widok koszyka (#cart) gdzie możesz:
   - zmieniać ilości / usuwać produkty
   - wybrać metodę dostawy (InPost / Odbiór osobisty)
   - wybrać metodę płatności (przekierowanie do linku PSP, lub otwieranie linków produktu)
   - kliknąć "Przejdź do płatności" aby przejść do checkout (działa jeśli ustawisz STORE_CHECKOUT_LINK lub produkty mają data-paylink)

  Instrukcja:
  1) Aby ustawić globalny link do checkout (np. z Przelewy24/PayU): ustaw zmienną STORE_CHECKOUT_LINK w sekcji <script> (w kodzie). Jeśli jest ustawiona, przycisk "Przejdź do płatności" przekieruje tam.
  2) Jeśli nie masz globalnego linku, każdy produkt może mieć własny data-paylink — wówczas przycisk checkout spróbuje otworzyć linki produktów w nowych kartach (prostszym flow dla statycznej strony).
  3) Pliki obrazów, logo itp. wstaw do repo (logo.png lub zmień src).
  4) Wypchnij repo na GitHub i włącz GitHub Pages.

  Jeśli chcesz, mogę przerobić to na flow z Stripe Checkout (wymaga małego serverless) — daj znać.
-->

<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sklep - statyczna strona (GitHub Pages)</title>
  <style>
    :root{--accent:#0b74de;--bg:#f7f8fb;--card:#ffffff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}

    /* Nagłówek */
    header{display:flex;align-items:center;gap:16px;padding:12px 18px;background:linear-gradient(180deg,#fff, #fbfdff);border-bottom:1px solid #e6eef9;position:sticky;top:0;z-index:20}
    .logo-wrap{display:flex;align-items:center;gap:10px}
    .logo{width:56px;height:40px;display:flex;align-items:center;justify-content:center;background:#eef6ff;border-radius:6px;overflow:hidden}
    .logo img{max-width:100%;max-height:100%;display:block}
    .site-title{font-weight:700;font-size:16px}
    .spacer{flex:1}
    .cart{font-size:14px;color:var(--muted);display:flex;gap:12px;align-items:center}
    .btn-small{padding:6px 10px;border-radius:8px;border:0;cursor:pointer;font-weight:600}

    /* Główna zawartość */
    .container{max-width:1100px;margin:24px auto;padding:0 18px}
    .hero{display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:18px}
    .hero h1{margin:0;font-size:22px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}

    /* Karta produktu */
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(17,24,39,0.04);display:flex;flex-direction:column;gap:10px}
    .thumb{height:150px;border-radius:8px;background:#f1f5f9;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .name{font-weight:600}
    .price{font-weight:700}
    .desc{color:var(--muted);font-size:13px}

    .actions{display:flex;gap:8px;align-items:center}
    .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid #e6eef9;color:var(--muted)}

    /* Toast */
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.15);opacity:0;pointer-events:none;transition:all .28s ease}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    /* Widok koszyka */
    .cart-view{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(17,24,39,0.04)}
    .cart-list{display:flex;flex-direction:column;gap:12px}
    .cart-item{display:flex;gap:12px;align-items:center}
    .cart-item img{width:72px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:var(--muted)}

    footer{margin:30px 0;color:var(--muted);text-align:center;font-size:13px}

    @media (max-width:600px){
      .hero{flex-direction:column;align-items:flex-start}
      .logo{width:48px;height:36px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-wrap">
      <a href="#" id="home-link" style="display:flex;align-items:center;text-decoration:none;color:inherit;">
        <div class="logo" title="Twoje logo (zamień plik logo.png)">
          <img id="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
          <div id="logo-initials" style="display:none;font-weight:700;color:var(--accent)">MOJE</div>
        </div>
      </a>
      <div>
        <div class="site-title">Mój sklep</div>
        <div style="font-size:12px;color:var(--muted)">Statyczna strona + prosty koszyk</div>
      </div>
    </div>

    <div class="spacer"></div>

    <div class="cart">
      <div>Koszyk: <strong id="cart-count">0</strong></div>
      <button class="btn-small btn-primary" id="go-cart">Przejdź do koszyka</button>
    </div>
  </header>

  <main class="container" id="app">
    <!-- Widok "Produkty" i "Koszyk" są renderowane przez JS w tym pliku -->
  </main>

  <div class="toast" id="toast">Dodano do koszyka</div>

  <footer style="max-width:1100px;margin:24px auto;padding:0 18px;">
    © Twój sklep — zmień treść i zdjęcia na własne.
  </footer>

  <script>
    /***** USTAWIENIA (EDYTUJ TUTAJ) *****/
    // Jeśli masz globalny link do checkout (np. Przelewy24 "link do płatności" lub Twój serwer który tworzy sesję płatności), wklej go tutaj.
    // Jeżeli pusty string -> system spróbuje otworzyć linki przypisane do produktów (data-paylink).
    const STORE_CHECKOUT_LINK = '';

    // Przykładowe produkty (możesz je edytować albo dodać kolejne).
    const PRODUCTS = [
      { id: 'p1', name: 'Produkt 1', price: 1000, priceText: '10,00 PLN', img: 'https://images.unsplash.com/photo-1606813902820-4b3c6fb7f3e6?q=80&w=800&auto=format&fit=crop', paylink: 'https://example.com/pay/product1' },
      { id: 'p2', name: 'Produkt 2', price: 2500, priceText: '25,00 PLN', img: 'https://images.unsplash.com/photo-1513708929623-0e9f39f2d1f3?q=80&w=800&auto=format&fit=crop', paylink: 'https://example.com/pay/product2' }
    ];
    /***** KONIEC USTAWIEŃ *****/

    // Utils
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // CART key
    const CART_KEY = 'shop_cart_v1';

    // Helper: get cart from localStorage
    function getCart(){
      try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch(e){ return []; }
    }
    function saveCart(cart){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); updateCartCount(); }

    function addToCart(productId){
      const prod = PRODUCTS.find(p=>p.id===productId);
      if(!prod) return;
      const cart = getCart();
      const existing = cart.find(i=>i.id===productId);
      if(existing){ existing.qty += 1; }
      else { cart.push({ id: prod.id, name: prod.name, price: prod.price, priceText: prod.priceText, img: prod.img, paylink: prod.paylink, qty: 1 }); }
      saveCart(cart);
      showToast('Dodano do koszyka');
    }

    function removeFromCart(productId){
      let cart = getCart();
      cart = cart.filter(i=>i.id !== productId);
      saveCart(cart);
      renderApp();
    }

    function changeQty(productId, delta){
      const cart = getCart();
      const item = cart.find(i=>i.id===productId);
      if(!item) return;
      item.qty += delta;
      if(item.qty < 1) item.qty = 1;
      saveCart(cart);
      renderApp();
    }

    function updateCartCount(){
      const cart = getCart();
      const count = cart.reduce((s,i)=>s+i.qty,0);
      const el = document.getElementById('cart-count');
      if(el) el.textContent = count;
    }

    function showToast(txt){
      const t = document.getElementById('toast');
      t.textContent = txt;
      t.classList.add('show');
      setTimeout(()=> t.classList.remove('show'), 1800);
    }

    // Render strony głównej z produktami
    function renderProductsView(){
      const container = document.getElementById('app');
      container.innerHTML = `
        <section class="hero">
          <div>
            <h1>Produkty</h1>
            <p style="margin:6px 0;color:var(--muted)">Kliknij "Dodaj do koszyka" aby dodać produkt. Następnie przejdź do koszyka.</p>
          </div>
          <div></div>
        </section>
        <section class="products" id="products-grid"></section>
      `;
      const grid = document.getElementById('products-grid');
      PRODUCTS.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb"><img src="${p.img}" alt="${p.name}"></div>
          <div class="meta"><div class="name">${p.name}</div><div class="price">${p.priceText}</div></div>
          <div class="desc small">Opis produktu — dostosuj do swoich potrzeb.</div>
          <div class="actions">
            <button class="btn btn-primary" data-id="${p.id}">Dodaj do koszyka</button>
            <button class="btn btn-ghost" data-copy="${p.paylink}">Kopiuj link</button>
          </div>
        `;
        grid.appendChild(card);
      });

      // Podpinki eventów
      $$('.btn.btn-primary[data-id]').forEach(b=> b.addEventListener('click', ()=> addToCart(b.getAttribute('data-id'))));
      $$('.btn.btn-ghost[data-copy]').forEach(b=> b.addEventListener('click', ()=> {
        const url = b.getAttribute('data-copy');
        navigator.clipboard && navigator.clipboard.writeText(url).then(()=> showToast('Skopiowano link do płatności')) .catch(()=> prompt('Skopiuj link:', url));
      }));
    }

    // Render widok koszyka
    function renderCartView(){
      const container = document.getElementById('app');
      const cart = getCart();
      const subtotal = cart.reduce((s,i)=>s + i.price * i.qty, 0);
      // prosty cennik dostaw
      const shippingOptions = [ { id: 'inpost', name: 'Paczkomat InPost', price: 150 }, { id: 'pickup', name: 'Odbiór osobisty (gratis)', price: 0 } ];
      const defaultShipping = shippingOptions[0].id;

      container.innerHTML = `
        <section class="hero">
          <div>
            <h1>Koszyk</h1>
            <p style="margin:6px 0;color:var(--muted)">Sprawdź swoje produkty, wybierz dostawę i metodę płatności.</p>
          </div>
          <div></div>
        </section>

        <div class="cart-view">
          <div style="display:flex;gap:20px;flex-direction:column">
            <div class="cart-list" id="cart-list">
              ${cart.length === 0 ? '<div class="small">Twój koszyk jest pusty.</div>' : ''}
            </div>

            <div style="display:flex;gap:20px;flex-wrap:wrap;align-items:center;margin-top:8px">
              <div style="min-width:320px">
                <div class="small" style="margin-bottom:6px">Dostawa</div>
                ${shippingOptions.map(s=>`<label style="display:block"><input type="radio" name="shipping" value="${s.id}" ${s.id===defaultShipping? 'checked':''}> ${s.name} (${(s.price/100).toFixed(2)} PLN)</label>`).join('')}
              </div>

              <div style="min-width:320px">
                <div class="small" style="margin-bottom:6px">Płatność</div>
                <label style="display:block"><input type="radio" name="paymethod" value="storelink" checked> Link do checkout (globalny)</label>
                <label style="display:block"><input type="radio" name="paymethod" value="perproduct"> Oddzielny link dla każdego produktu</label>
                <label style="display:block"><input type="radio" name="paymethod" value="cod"> Płatność przy odbiorze</label>
                <div class="small" style="margin-top:6px;color:var(--muted)">Uwaga: jeśli chcesz obsłużyć BLIK/Przelew, wklej globalny link do zamówienia w zmiennej STORE_CHECKOUT_LINK w kodzie strony.</div>
              </div>

              <div style="margin-left:auto">
                <div class="small">Razem:</div>
                <div style="font-weight:700;font-size:18px" id="total-sum">${(subtotal/100).toFixed(2)} PLN</div>
                <div style="margin-top:8px;display:flex;gap:8px">
                  <button class="btn btn-primary" id="checkout-btn">Przejdź do płatności</button>
                  <button class="btn btn-ghost" id="clear-cart">Wyczyść koszyk</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      `;

      const list = document.getElementById('cart-list');
      cart.forEach(item=>{
        const el = document.createElement('div');
        el.className = 'cart-item';
        el.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div style="flex:1">
            <div style="font-weight:700">${item.name}</div>
            <div class="small">${item.priceText} × ${item.qty} = ${(item.price*item.qty/100).toFixed(2)} PLN</div>
          </div>
          <div class="qty">
            <button class="btn-ghost" data-dec="${item.id}">-</button>
            <div class="small">${item.qty}</div>
            <button class="btn-ghost" data-inc="${item.id}">+</button>
            <button class="btn-ghost" data-remove="${item.id}">Usuń</button>
          </div>
        `;
        list.appendChild(el);
      });

      // Update total sum when shipping changed
      $$('input[name=shipping]').forEach(r=> r.addEventListener('change', ()=> updateTotalSum()));

      // qty buttons
      $$('[data-dec]').forEach(b=> b.addEventListener('click', ()=> { changeQty(b.getAttribute('data-dec'), -1); }));
      $$('[data-inc]').forEach(b=> b.addEventListener('click', ()=> { changeQty(b.getAttribute('data-inc'), +1); }));
      $$('[data-remove]').forEach(b=> b.addEventListener('click', ()=> { removeFromCart(b.getAttribute('data-remove')); }));

      document.getElementById('clear-cart').addEventListener('click', ()=>{ if(confirm('Wyczyścić koszyk?')){ saveCart([]); renderApp(); } });

      document.getElementById('checkout-btn').addEventListener('click', ()=> {
        const paymethod = document.querySelector('input[name=paymethod]:checked').value;
        const shipping = document.querySelector('input[name=shipping]:checked').value;
        const shippingCost = shippingOptions.find(s=>s.id===shipping).price;
        const cartNow = getCart();
        if(cartNow.length === 0) { alert('Koszyk jest pusty.'); return; }

        // jeśli płatność przy odbiorze
        if(paymethod === 'cod'){
          alert('Wybrałeś płatność przy odbiorze. Zamówienie zostało zapisane lokalnie. Skontaktuj się z klientem aby potwierdzić realizację.');
          // tutaj możesz wysłać zamówienie na swój e-mail ręcznie albo zapisać je na serwer.
          localStorage.setItem('last_order', JSON.stringify({ cart: cartNow, shipping, shippingCost, total: cartNow.reduce((s,i)=>s+i.price*i.qty,0) + shippingCost }));
          saveCart([]);
          location.hash = '#';
          renderApp();
          return;
        }

        // jeśli masz globalny checkout link
        if(STORE_CHECKOUT_LINK && paymethod === 'storelink'){
          // Możesz wysyłać dane do swojego serwera tutaj. Na statycznym hostingu: przekieruj do linku (PSP) i ewentualnie dołącz parametry GET jeśli PSP to wspiera
          window.open(STORE_CHECKOUT_LINK, '_blank', 'noopener');
          return;
        }

        // jeśli nie ma globalnego linku i wybrano 'perproduct' -> otwieramy linki produktów (po kolei) w nowych kartach
        if(paymethod === 'perproduct'){
          let opened = 0;
          cartNow.forEach(item=>{
            if(item.paylink){ window.open(item.paylink, '_blank', 'noopener'); opened++; }
          });
          if(opened === 0){
            alert('Brak linków do płatności ustawionych przy produktach. Dodaj paylink w konfiguracji produktu lub ustaw globalny link STORE_CHECKOUT_LINK.');
          }
          return;
        }

        // fallback
        alert('Nie można wygenerować płatności automatycznie: ustaw STORE_CHECKOUT_LINK w kodzie albo przypisz paylink do produktów.');
      });

      updateTotalSum();
    }

    function updateTotalSum(){
      const cart = getCart();
      const subtotal = cart.reduce((s,i)=>s + i.price * i.qty, 0);
      const shippingOptions = { inpost:150, pickup:0 };
      const shipping = document.querySelector('input[name=shipping]:checked');
      const shipCost = shipping ? shippingOptions[shipping.value] : 0;
      const total = (subtotal + shipCost)/100;
      const el = document.getElementById('total-sum');
      if(el) el.textContent = total.toFixed(2) + ' PLN';
    }

    // RENDERE APP
    function renderApp(){
      updateCartCount();
      const hash = location.hash || '#';
      if(hash === '#cart') renderCartView();
      else renderProductsView();
    }

    // init
    window.addEventListener('load', ()=>{
      // logo fallback
      const logoImg = document.getElementById('logo-img');
      const logoInit = document.getElementById('logo-initials');
      if (logoImg && logoImg.style.display === 'none') { logoInit.style.display = 'block'; }

      // home / cart buttons
      document.getElementById('go-cart').addEventListener('click', ()=> { location.hash = '#cart'; renderApp(); });
      document.getElementById('home-link').addEventListener('click', (e)=>{ e.preventDefault(); location.hash = '#'; renderApp(); });

      // react to back/forward
      window.addEventListener('hashchange', renderApp);

      renderApp();
    });
  </script>
</body>
</html>
